{"ast":null,"code":"import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nvar NUMBERING_SYSTEM_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nexport function InitializeRelativeTimeFormat(rtf, locales, options, _a) {\n  var getInternalSlots = _a.getInternalSlots,\n      availableLocales = _a.availableLocales,\n      relevantExtensionKeys = _a.relevantExtensionKeys,\n      localeData = _a.localeData,\n      getDefaultLocale = _a.getDefaultLocale;\n  var internalSlots = getInternalSlots(rtf);\n  internalSlots.initializedRelativeTimeFormat = true;\n  var requestedLocales = CanonicalizeLocaleList(locales);\n  var opt = Object.create(null);\n  var opts = CoerceOptionsToObject(options);\n  var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n  opt.localeMatcher = matcher;\n  var numberingSystem = GetOption(opts, // @ts-expect-error TS option is wack\n  'numberingSystem', 'string', undefined, undefined);\n\n  if (numberingSystem !== undefined) {\n    if (!NUMBERING_SYSTEM_REGEX.test(numberingSystem)) {\n      throw new RangeError(\"Invalid numbering system \" + numberingSystem);\n    }\n  }\n\n  opt.nu = numberingSystem;\n  var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n  var locale = r.locale,\n      nu = r.nu;\n  internalSlots.locale = locale;\n  internalSlots.style = GetOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n  internalSlots.numeric = GetOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n  var fields = localeData[r.dataLocale];\n  invariant(!!fields, \"Missing locale data for \" + r.dataLocale);\n  internalSlots.fields = fields;\n  internalSlots.numberFormat = new Intl.NumberFormat(locales);\n  internalSlots.pluralRules = new Intl.PluralRules(locales);\n  internalSlots.numberingSystem = nu;\n  return rtf;\n}","map":null,"metadata":{},"sourceType":"module"}